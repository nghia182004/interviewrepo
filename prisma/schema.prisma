generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Teacher {
  id            Int            @id @default(autoincrement())
  email         String         @unique(map: "email") @db.VarChar(255)
  createdAt     DateTime?      @default(now()) @map("created_at") @db.Timestamp(0)
  registrations Registration[]

  @@index([email], map: "idx_teacher_email")
  @@map("teachers")
}

model Student {
  id            Int            @id @default(autoincrement())
  email         String         @unique(map: "email") @db.VarChar(255)
  isSuspended   Boolean        @default(false) @map("is_suspended")
  createdAt     DateTime?      @default(now()) @map("created_at") @db.Timestamp(0)
  registrations Registration[]

  @@index([email], map: "idx_student_email")
  @@index([isSuspended], map: "idx_student_suspended")
  @@map("students")
}

model Registration {
  teacherId Int     @map("teacher_id")
  studentId Int     @map("student_id")
  teacher   Teacher @relation(fields: [teacherId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "registrations_ibfk_1")
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "registrations_ibfk_2")

  @@id([teacherId, studentId])
  @@index([teacherId], map: "idx_reg_teacher")
  @@index([studentId], map: "idx_reg_student")
  @@map("registrations")
}
